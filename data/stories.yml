version: "3.1"

stories:
  # ==========================================================
  # GREETING / HELP
  # ==========================================================
  - story: greet and help menu
    steps:
      - intent: greet
      - action: utter_greet
      - action: utter_help

  - story: help request
    steps:
      - intent: ask_help
      - action: utter_help

  - story: bot challenge
    steps:
      - intent: bot_challenge
      - action: utter_iamabot

  - story: goodbye flow
    steps:
      - intent: goodbye
      - action: utter_goodbye

  # ==========================================================
  # ADMISSIONS / INTAKES / DEADLINES (FOLLOW-UP HEAVY)
  # ==========================================================
  - story: admissions open -> ask context
    steps:
      - intent: ask_admissions_open
      - action: utter_admissions_open
      - intent: ask_intakes
      - action: utter_intakes

  - story: deadlines -> ask intake details
    steps:
      - intent: ask_deadlines
      - action: utter_deadlines
      - intent: ask_course_availability
      - action: utter_admissions_followup_course

  - story: late application -> needs details
    steps:
      - intent: ask_late_application
      - action: utter_admissions_followup_course

  - story: intake capacity -> needs details
    steps:
      - intent: ask_intake_capacity
      - action: utter_admissions_followup_course

  - story: waiting list -> needs details
    steps:
      - intent: ask_waiting_list
      - action: utter_admissions_followup_course

  - story: processing time -> needs details
    steps:
      - intent: ask_application_processing_time
      - action: utter_admissions_followup_course

  # ==========================================================
  # APPLY / ROUTES (UCAS VS DIRECT)
  # ==========================================================
  - story: how to apply (general)
    steps:
      - intent: ask_how_to_apply
      - action: utter_how_to_apply
      - intent: ask_ucas
      - action: utter_ucas

  - story: postgraduate apply flow
    steps:
      - intent: ask_postgraduate_how_to_apply
      - action: utter_pg_apply

  - story: international apply flow
    steps:
      - intent: ask_international_how_to_apply
      - action: utter_intl_apply

  - story: application status (route depends)
    steps:
      - intent: ask_application_status
      - action: utter_application_status

  - story: application fee (route depends)
    steps:
      - intent: ask_application_fee
      - action: utter_application_fee

  - story: change intake / update application
    steps:
      - intent: ask_change_intake
      - action: utter_application_changes

  - story: application error correction
    steps:
      - intent: ask_application_errors
      - action: utter_application_changes

  - story: multiple applications
    steps:
      - intent: ask_multiple_applications
      - action: utter_application_changes

  - story: reapply guidance
    steps:
      - intent: ask_reapply
      - action: utter_application_changes

  # ==========================================================
  # DOCUMENTS / SOP / REFERENCES / INTERVIEW
  # ==========================================================
  - story: documents required -> course follow-up
    steps:
      - intent: ask_documents_required
      - action: utter_documents_required

  - story: transcripts -> documents guidance
    steps:
      - intent: ask_transcripts
      - action: utter_documents_required

  - story: personal statement help -> outline
    steps:
      - intent: ask_personal_statement
      - action: utter_personal_statement
      - intent: ask_personal_statement_help
      - action: utter_personal_statement

  - story: references
    steps:
      - intent: ask_references
      - action: utter_references
      - intent: ask_reference_format
      - action: utter_references

  - story: portfolio interview
    steps:
      - intent: ask_portfolio_interview
      - action: utter_portfolio_interview
      - intent: ask_interview_format
      - action: utter_portfolio_interview

  - story: medical/dbs checks
    steps:
      - intent: ask_medical_checks
      - action: utter_checks_health_dbs
      - intent: ask_dbs_check
      - action: utter_checks_health_dbs

  # ==========================================================
  # COURSES / MODULES / ASSESSMENT / PLACEMENTS
  # ==========================================================
  - story: courses offered -> subject clarification
    steps:
      - intent: ask_courses_offered
      - action: utter_courses_offered
      - intent: ask_course_finder
      - action: utter_courses_offered

  - story: course details -> ask course name
    steps:
      - intent: ask_course_details
      - action: utter_course_details

  - story: modules follow-up -> course name -> generic modules
    steps:
      - intent: ask_course_modules
      - action: utter_course_modules_ask_course
      - intent: provide_course_name
      - action: utter_course_modules_generic

  - story: assessment schedule
    steps:
      - intent: ask_assessment_methods
      - action: utter_teaching_assessment
      - intent: ask_teaching_schedule
      - action: utter_teaching_assessment
      - intent: ask_contact_hours
      - action: utter_teaching_assessment

  - story: placements & accreditation
    steps:
      - intent: ask_placement_internship
      - action: utter_placements_accreditation
      - intent: ask_course_accreditation
      - action: utter_placements_accreditation
      - intent: ask_professional_body
      - action: utter_placements_accreditation

  # ==========================================================
  # SUBJECT AREAS (12 intents -> one response)
  # ==========================================================
  - story: subject business
    steps:
      - intent: ask_subject_business
      - action: utter_subject_area

  - story: subject accounting
    steps:
      - intent: ask_subject_accounting
      - action: utter_subject_area

  - story: subject computing
    steps:
      - intent: ask_subject_computing
      - action: utter_subject_area

  - story: subject ai
    steps:
      - intent: ask_subject_ai
      - action: utter_subject_area

  - story: subject engineering
    steps:
      - intent: ask_subject_engineering
      - action: utter_subject_area

  - story: subject nursing
    steps:
      - intent: ask_subject_nursing
      - action: utter_subject_area

  - story: subject health
    steps:
      - intent: ask_subject_health
      - action: utter_subject_area

  - story: subject psychology
    steps:
      - intent: ask_subject_psychology
      - action: utter_subject_area

  - story: subject law
    steps:
      - intent: ask_subject_law
      - action: utter_subject_area

  - story: subject architecture
    steps:
      - intent: ask_subject_architecture
      - action: utter_subject_area

  - story: subject media
    steps:
      - intent: ask_subject_media
      - action: utter_subject_area

  - story: subject education
    steps:
      - intent: ask_subject_education
      - action: utter_subject_area

  # ==========================================================
  # ENTRY REQUIREMENTS
  # ==========================================================
  - story: entry requirements general
    steps:
      - intent: ask_entry_requirements
      - action: utter_entry_requirements

  - story: mature student route
    steps:
      - intent: ask_mature_students
      - action: utter_entry_requirements

  - story: btec access route
    steps:
      - intent: ask_btec_access
      - action: utter_entry_requirements

  - story: ib route
    steps:
      - intent: ask_ib_entry
      - action: utter_entry_requirements

  - story: gcse route
    steps:
      - intent: ask_gcse_requirements
      - action: utter_entry_requirements

  - story: functional skills route
    steps:
      - intent: ask_functional_skills
      - action: utter_entry_requirements

  - story: advanced entry / credit transfer
    steps:
      - intent: ask_advanced_entry
      - action: utter_entry_requirements
      - intent: ask_credit_transfer
      - action: utter_entry_requirements

  # ==========================================================
  # ENGLISH LANGUAGE
  # ==========================================================
  - story: english requirement + alternatives
    steps:
      - intent: ask_english_requirements
      - action: utter_english_requirements
      - intent: ask_english_alternatives
      - action: utter_english_requirements

  - story: english validity/exemptions
    steps:
      - intent: ask_english_validity
      - action: utter_english_support
      - intent: ask_country_english_exempt
      - action: utter_english_support

  - story: pre-sessional + combined offer
    steps:
      - intent: ask_pre_sessional_english
      - action: utter_english_support
      - intent: ask_combined_offer
      - action: utter_english_support

  # ==========================================================
  # FEES / FINANCE
  # ==========================================================
  - story: fees -> collect context
    steps:
      - intent: ask_fees
      - action: utter_fees_intro
      - intent: provide_fee_context
      - action: utter_fees_intro

  - story: payment & scholarships
    steps:
      - intent: ask_payment_options
      - action: utter_payment_scholarships
      - intent: ask_scholarships
      - action: utter_payment_scholarships
      - intent: ask_international_scholarships
      - action: utter_payment_scholarships

  - story: student finance
    steps:
      - intent: ask_student_finance
      - action: utter_payment_scholarships

  - story: refunds and fee increase
    steps:
      - intent: ask_refunds
      - action: utter_refunds_fee_changes
      - intent: ask_fee_increase
      - action: utter_refunds_fee_changes

  # ==========================================================
  # VISA / CAS
  # ==========================================================
  - story: visa and cas
    steps:
      - intent: ask_visa
      - action: utter_visa_cas
      - intent: ask_cas
      - action: utter_visa_cas

  - story: cas deposit and timeline
    steps:
      - intent: ask_cas_deposit
      - action: utter_visa_cas
      - intent: ask_cas_timeline
      - action: utter_visa_cas

  - story: dependants and work restrictions
    steps:
      - intent: ask_dependants
      - action: utter_work_dependants
      - intent: ask_work_restrictions
      - action: utter_work_dependants

  # ==========================================================
  # OFFERS / CHANGES
  # ==========================================================
  - story: offer types and accept
    steps:
      - intent: ask_offer_types
      - action: utter_offers
      - intent: ask_accept_offer
      - action: utter_offers

  - story: deferral change course withdraw offer expiry
    steps:
      - intent: ask_deferral
      - action: utter_offers
      - intent: ask_change_course
      - action: utter_offers
      - intent: ask_withdraw_application
      - action: utter_offers
      - intent: ask_offer_expiry
      - action: utter_offers

  # ==========================================================
  # ACCOMMODATION
  # ==========================================================
  - story: accommodation options -> price follow-up
    steps:
      - intent: ask_accommodation_options
      - action: utter_accommodation_options
      - intent: ask_hall_price
      - action: utter_accommodation_pricing

  - story: accommodation apply and deadline
    steps:
      - intent: ask_accommodation_apply
      - action: utter_accommodation_apply
      - intent: ask_accommodation_deadline
      - action: utter_accommodation_apply

  - story: accommodation included and room types
    steps:
      - intent: ask_accommodation_included
      - action: utter_accommodation_options
      - intent: ask_room_types
      - action: utter_accommodation_options

  - story: private accommodation
    steps:
      - intent: ask_private_accommodation
      - action: utter_accommodation_options

  # ==========================================================
  # CAMPUS / LIFE
  # ==========================================================
  - story: address transport open day
    steps:
      - intent: ask_address
      - action: utter_address
      - intent: ask_transport
      - action: utter_transport_open_day
      - intent: ask_open_day
      - action: utter_transport_open_day

  - story: student life facilities
    steps:
      - intent: ask_student_union
      - action: utter_student_life
      - intent: ask_library_facilities
      - action: utter_student_life
      - intent: ask_sports_facilities
      - action: utter_student_life
      - intent: ask_societies
      - action: utter_student_life

  # ==========================================================
  # SUPPORT / CAREERS
  # ==========================================================
  - story: support and careers
    steps:
      - intent: ask_student_support
      - action: utter_support_careers
      - intent: ask_disability_support
      - action: utter_support_careers
      - intent: ask_wellbeing_support
      - action: utter_support_careers
      - intent: ask_careers_support
      - action: utter_support_careers

  # ==========================================================
  # CONTACT
  # ==========================================================
  - story: contact admissions
    steps:
      - intent: ask_contact_admissions
      - action: utter_contact

  - story: contact faculty international office complaints
    steps:
      - intent: ask_faculty_contact
      - action: utter_contact
      - intent: ask_international_office
      - action: utter_contact
      - intent: ask_complaints
      - action: utter_contact
